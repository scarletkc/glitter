## Glitter CI/CD 流程图

```
       +--------------------+
       | Push/PR to main?   |
       +---------+----------+
                 |
                 v
        +-------------------------+
        | any *.py files changed? |
        +---------+---------------+
                  |
        yes       | no
                  v
        +--------------------+             +-----------------+
        | pytest (ubuntu)    |             | skip pytest job |
        +--------------------+             +-----------------+
                 |
                 v
        +--------------------+
        | pytest (windows)   |
        +---------+----------+
                 |
                 v
   +-------------+--------------+
   | push to main & tests pass? |
   +-------------+--------------+
                 |
                 v
      +-------------------------+
      | prepare_release (检测)  |
      +----+---------------+----+
           |               |
           |version changed?     |
           |               |
     yes   |               | yes
           v               v
 +------------------+   +------------------+
 | build_release    |   | publish_pypi     |
 | (win + linux)    |   | (build + upload) |
 +--------+---------+   +------------------+
          |
          v
   +------+-----------------------+
   | publish_release (gh-release) |
   +------------------------------+
```

> `pytest` 仅在 diff 中包含 `.py` 文件时才会运行；纯文档 / 资源改动会跳过。
> 只有 push 到 main 且 `glitter/__init__.py` 的版本号改变时，才会进入
> 构建可执行 / 发布 GitHub Release / 推送 PyPI 的阶段；否则直接结束。
